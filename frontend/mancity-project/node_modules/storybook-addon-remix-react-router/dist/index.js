import { makeDecorator, addons } from '@storybook/preview-api';
import P, { useState, useMemo, useCallback, useRef } from 'react';
import de from '../package.json' assert { type: 'json' };
import { createMemoryRouter, RouterProvider, UNSAFE_RouteContext, useLocation, useParams, useSearchParams, useNavigationType } from 'react-router-dom';

var p="storybook/react-router-v6",z="reactRouter",l={CLEAR:`${p}/clear`,NAVIGATION:`${p}/navigation`,STORY_LOADED:`${p}/story-loaded`,ROUTE_MATCHES:`${p}/route-matches`,ACTION_INVOKED:`${p}/action_invoked`,ACTION_SETTLED:`${p}/action_settled`,LOADER_INVOKED:`${p}/loader_invoked`,LOADER_SETTLED:`${p}/loader_settled`};de.version;var D=P.createContext([]);var b=P.createContext(void 0);function k(){let[e,t]=useState([]),r=UNSAFE_RouteContext;return r.Provider._context=new Proxy(r.Provider._context??{},{set(n,o,i){return o==="_currentValue"&&i!==void 0&&t(a=>i.matches.length>a.length?i.matches:a),Reflect.set(n,o,i)}}),e}function V(e){let t={};return e.forEach((r,n)=>{if(r instanceof File){t[n]={filename:r.name,filesize:r.size,filetype:r.type};return}t[n]=r;}),t}async function T(e){let t=e.clone(),r=t.headers.get("content-type")||"",n;switch(!0){case r.startsWith("text"):n=await t.text();break;case r.startsWith("application/json"):n=await t.json();break;case r.startsWith("multipart/form-data"):case r.startsWith("application/x-www-form-urlencoded"):{n=V(await t.formData());break}}return n}var w=()=>{let e=useRef(0);return useCallback(async(t,r)=>{e.current++;let n=`${t}_${e.current}`;switch(t){case l.ACTION_INVOKED:{let{request:o,params:i,context:a}=r,c={url:o.url,method:o.method,body:await T(o)};return {key:n,type:t,data:{params:i,request:c,context:a}}}case l.ACTION_SETTLED:return {key:n,type:t,data:r};case l.LOADER_INVOKED:{let{request:o,params:i,context:a}=r,c={url:o.url,method:o.method,body:await T(o)};return {key:n,type:t,data:{params:i,request:c,context:a}}}case l.LOADER_SETTLED:return {key:n,type:t,data:r}}},[])};function B(){let e=addons.getChannel(),t=w();return useCallback(r=>async function(n){if(r===void 0)return;e.emit(l.ACTION_INVOKED,await t(l.ACTION_INVOKED,n));let o=await r(n);return e.emit(l.ACTION_SETTLED,await t(l.ACTION_SETTLED,o)),o},[e,t])}function K(){let e=addons.getChannel(),t=w();return useCallback(r=>async function(n){if(r===void 0)return;e.emit(l.LOADER_INVOKED,await t(l.LOADER_INVOKED,n));let o=await r(n);return e.emit(l.LOADER_SETTLED,await t(l.LOADER_SETTLED,o)),o},[e,t])}function $(){let e=B(),t=K(),r=useCallback(n=>n.map(o=>{let{action:i,loader:a,children:c,lazy:d}=o,h={...o};return d&&(h.lazy=async function(){let s=await d(),f={...s};return s.action&&(f.action=e(s.action)),s.loader&&(f.loader=t(s.loader)),f}),i&&(h.action=e(i)),a&&(h.loader=t(a)),c&&(h.children=r(c)),h}),[e,t]);return r}var x=()=>{let e=P.useContext(b);if(e===void 0)throw new Error("useStory should be used inside <StoryContext>");return e};function L(e,t,r=0){return e.length===1&&(e[0].children===void 0||e[0].children.length===0)?[{...e[0],element:t}]:e.findIndex(o=>o.useStoryElement)!==-1?e.map(o=>o.useStoryElement?{...o,element:t}:o):e.map(o=>o.children?{...o,children:L(o.children,t)}:o)}var W;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE";})(W||(W={}));function Se(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ee(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}var Y;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error";})(Y||(Y={}));function N(e,t){t===void 0&&(t={});let r=e;r.endsWith("*")&&r!=="*"&&!r.endsWith("/*")&&(Ee(!1,'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".')),r=r.replace(/\*$/,"/*"));let n=r.startsWith("/")?"/":"",o=a=>a==null?"":typeof a=="string"?a:String(a),i=r.split(/\/+/).map((a,c,d)=>{if(c===d.length-1&&a==="*")return o(t["*"]);let s=a.match(/^:([\w-]+)(\??)$/);if(s){let[,f,_]=s,R=t[f];return Se(_==="?"||R!=null,'Missing ":'+f+'" param'),o(R)}return a.replace(/\?$/g,"")}).filter(a=>!!a);return n+i.join("/")}var J=["post","put","patch","delete"];new Set(J);var Pe=["get",...J];new Set(Pe);function G({navigationHistory:e,location:t,routes:r}){if(e!==void 0){let R=[],A,F=Object.values(e);for(let v=0;v<F.length;v++){let{path:O,pathParams:U,searchParams:ie,hash:le,state:se,isInitialLocation:ue}=F[v];ue&&(A=v);let H=M(r),ce=(typeof O=="function"?O(H,U??{}):O)??H;R.push({pathname:N(ce??"/",U),search:new URLSearchParams(ie).toString(),hash:le,state:se});}return A??=R.length-1,{initialEntries:R,initialIndex:A}}let{path:n,pathParams:o,searchParams:i,hash:a,state:c}=t??{},d=M(r),s=(typeof n=="function"?n(d,o??{}):n)??d;return {initialEntries:[{pathname:N(s,o),search:new URLSearchParams(i).toString(),hash:a,state:c}],initialIndex:0}}function M(e=[],t="/"){if(e.length!==1)return t;let r=e[0],n=Ae(t,r.path);return r.children===void 0||r.children.length===0?n:M(r.children,n)}function Ae(e,t=""){let r=["","/"],n=e.split("/").filter(a=>!r.includes(a)),o=t.split("/").filter(a=>!r.includes(a));return "/"+[...n,...o].join("/")}function u(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function y(e,t){if(e===!1||e===null||typeof e>"u")throw console.warn("Test invariant failed:",t),new Error(t)}function S(e){return arguments.length===0?[]:Array.isArray(e)?e:[e]}function q(e){return e===void 0?[{path:"/"}]:typeof e=="string"?[{path:e}]:(e=S(e),e.length===1&&(e[0].path??="/"),e)}var E=()=>P.useContext(D);function X(e){let t={};return e.forEach((r,n)=>{let o=t[n];if(typeof o=="string"){t[n]=[o,r];return}if(Array.isArray(o)){t[n]=[...o,r];return}t[n]=r;}),t}var Q=()=>{let e=useLocation(),t=e.pathname;return e.search.length>0&&(t+=`?${e.search}`),e.hash.length>0&&(t+=`#${e.hash}`),t};var Z=()=>{let e=useRef(0),t=useLocation(),r=useParams(),[n]=useSearchParams(),o=useNavigationType(),i=E(),a=X(n),c=Q(),d=i.map(s=>{let f={path:s.route.path};return Object.keys(s.params).length>0&&(f.params=s.params),f}),h={url:c,path:t.pathname,routeParams:r,searchParams:a,hash:t.hash,routeState:t.state,routeMatches:d};return s=>{e.current++;let f=`${s}_${e.current}`;switch(s){case l.STORY_LOADED:return {key:f,type:s,data:h};case l.NAVIGATION:return {key:f,type:s,data:{...h,navigationType:o}};case l.ROUTE_MATCHES:return {key:f,type:s,data:{matches:d}}}}};function C(){let{renderStory:e,storyContext:t}=x(),r=addons.getChannel(),n=useLocation(),o=E(),i=Z(),a=useRef(),c=useRef(),d=useRef(),h=a.current!==void 0,s=h&&n.key!==a.current;return s&&c.current!==n.key&&(r.emit(l.NAVIGATION,i(l.NAVIGATION)),c.current=n.key),s&&o.length>0&&o!==d.current&&r.emit(l.ROUTE_MATCHES,i(l.ROUTE_MATCHES)),!h&&o.length>0&&(r.emit(l.STORY_LOADED,i(l.STORY_LOADED)),a.current=n.key,d.current=o),d.current=o,P.createElement(P.Fragment,null,e(t))}C.displayName="RouterLogger";function te(){let{addonParameters:e={}}=x(),{hydrationData:t,routing:r,navigationHistory:n,location:o}=e,i=$(),a=useMemo(()=>{let c=q(r),d=i(c),h=L(d,P.createElement(C,null)),{initialEntries:s,initialIndex:f}=G({navigationHistory:n,location:o,routes:h});return createMemoryRouter(h,{initialEntries:s,initialIndex:f,hydrationData:t})},[i,t,o,n,r]);return P.createElement(RouterProvider,{router:a,fallbackElement:P.createElement(ze,null)})}function ze(){return P.createElement("p",null,"Performing initial data load")}var re=({renderStory:e,storyContext:t,addonParameters:r})=>{let n=k();return P.createElement(b.Provider,{value:{renderStory:e,storyContext:t,addonParameters:r}},P.createElement(D.Provider,{value:n},P.createElement(te,null)))};function oe(e){if(P.isValidElement(e))return !0;switch(!0){case P.isValidElement(e):case typeof e=="string":case typeof e=="number":case typeof e=="boolean":case e===null:case e===void 0:case(e instanceof Object&&u(e,Symbol.iterator)):return !0}return !1}function m(e){return oe(e)?{element:e}:e}function ae(e={}){let t=["location","navigationHistory","routing"];if(Object.keys(e??{}).some(o=>t.includes(o)))return e;let n={routing:{},location:{},hydrationData:void 0};if(u(e,"routePath")&&(n.location.path=e.routePath,n.routing.path=e.routePath),u(e,"routeParams")&&(n.location.pathParams=e.routeParams),u(e,"routeState")&&(n.location.state=e.routeState),u(e,"routeHandle")&&(n.routing.handle=e.routeHandle),u(e,"searchParams")&&(n.location.searchParams=e.searchParams),u(e,"browserPath")&&(n.location.path=e.browserPath),u(e,"loader")&&(n.routing.loader=e.loader),u(e,"action")&&(n.routing.action=e.action),u(e,"errorElement")&&(n.routing.errorElement=e.errorElement),u(e,"hydrationData")&&(n.hydrationData=e.hydrationData),u(e,"shouldRevalidate")&&(n.routing.shouldRevalidate=e.shouldRevalidate),u(e,"routeId")&&(n.routing.id=e.routeId),u(e,"outlet")){let o=m(e.outlet);o.path??="",n.routing.children=[o];}return n.routing.useStoryElement=!0,n}var Be=makeDecorator({name:"withRouter",parameterName:z,wrapper:(e,t,{parameters:r})=>{let n=ae(r);return P.createElement(re,{renderStory:e,storyContext:t,addonParameters:n})}});function Ke(e){return e}function g(e){let t={},r=[];return e.length===1&&(t={},r=e[0]),e.length===2&&(t=typeof e[0]=="string"?{path:e[0]}:m(e[0]),r=e[1]),[t,r]}function $e(...e){let[t,r]=g(e);y(!u(t,"element"),"The story definition cannot contain the `element` property because the story element will be used");let n=m(r);return n.index=!0,[{...t,useStoryElement:!0,children:[n]}]}function We(...e){let[t,r]=g(e);return y(!u(t,"element"),"The story definition cannot contain the `element` property because the story element will be used"),[{...t,useStoryElement:!0,children:r}]}function Ye(...e){let[t,r]=g(e);y(!u(t,"element"),"The story definition cannot contain the `element` property because the story element will be used");let n={},o=n;return r.forEach(i=>{let a=m(i);a.path??="",o.children=[a],o=a;},n),[{...t,useStoryElement:!0,children:[n]}]}function Je(...e){let t=e.length===1?{}:e[0],r=S(e.length===1?e[0]:e[1]);y(!u(t,"element"),"The story definition cannot contain the `element` property because the story element will be used");let n={path:"/"},o=n;for(let i=0;i<r.length;i++){let a=r[i],c=m(a);c.path??="",o.children=[c],o=c;}return o.children=[{...t,index:!0,useStoryElement:!0}],[n]}/*! Bundled license information:

@remix-run/router/dist/router.js:
  (**
   * @remix-run/router v1.15.2
   *
   * Copyright (c) Remix Software Inc.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   *)
*/

export { m as castRouterRoute, Je as reactRouterNestedAncestors, Ye as reactRouterNestedOutlets, $e as reactRouterOutlet, We as reactRouterOutlets, Ke as reactRouterParameters, Be as withRouter };
//# sourceMappingURL=out.js.map
//# sourceMappingURL=index.js.map
import {
  RouterProvider,
  useSearchParams
} from "./chunk-FOPBGT4I.js";
import {
  RouteContext,
  createMemoryRouter,
  useLocation,
  useNavigationType,
  useParams
} from "./chunk-4YWXVYN7.js";
import {
  require_preview_api
} from "./chunk-EYSCJXIZ.js";
import "./chunk-T5D62UJ2.js";
import {
  require_react
} from "./chunk-37SVYLT7.js";
import {
  __toESM
} from "./chunk-BYPFWIQ6.js";

// node_modules/storybook-addon-remix-react-router/dist/index.js
var import_preview_api = __toESM(require_preview_api());
var import_react = __toESM(require_react());

// node_modules/storybook-addon-remix-react-router/package.json
var package_default = {
  name: "storybook-addon-remix-react-router",
  version: "3.0.0",
  description: "Use Remix React Router in your stories. (Formerly storybook-addon-react-router-v6)",
  keywords: [
    "storybook",
    "storybook-addons",
    "remix",
    "react",
    "router",
    "react-router",
    "remix-react-router"
  ],
  repository: {
    type: "git",
    url: "git+https://github.com/JesusTheHun/storybook-addon-remix-react-router.git"
  },
  author: "Jonathan MASSUCHETTI <jonathan.massuchetti@dappit.fr>",
  license: "Apache-2.0",
  exports: {
    ".": {
      types: "./dist/index.d.ts",
      require: "./dist/index.cjs",
      import: "./dist/index.js"
    },
    "./preview": {
      types: "./dist/preview.d.ts",
      import: "./dist/preview.js",
      require: "./dist/preview.js"
    },
    "./preset": "./dist/preset.cjs",
    "./manager": "./dist/manager.js",
    "./package.json": "./package.json"
  },
  type: "module",
  main: "dist/index.js",
  module: "dist/index.mjs",
  types: "dist/index.d.ts",
  files: [
    "dist/**/*",
    "README.md",
    "*.js",
    "*.d.ts"
  ],
  scripts: {
    clean: "rimraf ./dist",
    prebuild: "npm run clean",
    build: "tsup",
    "build:watch": "tsup --watch",
    test: "vitest",
    "test:ci": "vitest run",
    start: 'concurrently "npm run build:watch" "npm run storybook --quiet"',
    prerelease: "zx scripts/prepublish-checks.mjs",
    release: "npm run build && auto shipit",
    "eject-ts": "zx scripts/eject-typescript.mjs",
    storybook: "storybook dev -p 6006 --no-open",
    "build-storybook": "storybook build",
    chromatic: "npx chromatic --project-token=e29962fd32f5",
    prepare: "husky install",
    "prettier:check": "prettier --check .",
    "prettier:write": "prettier --write ."
  },
  dependencies: {
    "compare-versions": "^6.0.0",
    "react-inspector": "6.0.2"
  },
  peerDependencies: {
    "@storybook/blocks": "^8.0.0",
    "@storybook/channels": "^8.0.0",
    "@storybook/components": "^8.0.0",
    "@storybook/core-events": "^8.0.0",
    "@storybook/manager-api": "^8.0.0",
    "@storybook/preview-api": "^8.0.0",
    "@storybook/theming": "^8.0.0",
    react: "^16.8.0 || ^17.0.0 || ^18.0.0",
    "react-dom": "^16.8.0 || ^17.0.0 || ^18.0.0",
    "react-router-dom": "^6.4.0"
  },
  devDependencies: {
    "@remix-run/router": "^1.3.3",
    "@remix-run/web-fetch": "^4.3.2",
    "@storybook/addon-essentials": "^8.0.0",
    "@storybook/components": "^8.0.0",
    "@storybook/core-common": "^8.0.0",
    "@storybook/core-events": "^8.0.0",
    "@storybook/manager-api": "^8.0.0",
    "@storybook/preview-api": "^8.0.0",
    "@storybook/react": "^8.0.0",
    "@storybook/react-vite": "^8.0.0",
    "@storybook/testing-library": "^0.2.2-next.0",
    "@storybook/theming": "^8.0.0",
    "@testing-library/jest-dom": "^5.16.5",
    "@testing-library/react": "^14.0.0",
    "@testing-library/user-event": "^14.4.3",
    "@types/node": "^18.15.0",
    "@types/react-inspector": "^4.0.2",
    "@typescript-eslint/eslint-plugin": "^5.61.0",
    "@typescript-eslint/parser": "^5.61.0",
    "@vitejs/plugin-react": "^3.1.0",
    auto: "^11.1.1",
    boxen: "^5.0.1",
    chromatic: "^6.17.4",
    concurrently: "^6.2.0",
    dedent: "^0.7.0",
    eslint: "^8.44.0",
    "eslint-config-prettier": "^8.8.0",
    "eslint-plugin-prettier": "^4.2.1",
    "eslint-plugin-react-hooks": "^4.6.0",
    "eslint-plugin-react-refresh": "^0.4.1",
    "expect-type": "^0.16.0",
    husky: "^8.0.3",
    jsdom: "^21.1.0",
    "lint-staged": "^13.2.3",
    prettier: "2.8.8",
    prompts: "^2.4.2",
    "prop-types": "^15.8.1",
    react: "^18.0.1",
    "react-dom": "^18.0.1",
    "react-router-dom": "^6.14.2",
    rimraf: "^3.0.2",
    storybook: "^8.0.0",
    tsup: "^8.0.2",
    typescript: "5.3.2",
    "utility-types": "^3.10.0",
    vite: "^4.3.9",
    vitest: "^0.29.2",
    zx: "^1.14.1"
  },
  "lint-staged": {
    "**/*": "prettier --write --ignore-unknown"
  },
  peerDependenciesMeta: {
    react: {
      optional: true
    },
    "react-dom": {
      optional: true
    }
  },
  publishConfig: {
    access: "public"
  },
  storybook: {
    displayName: "Remix React Router (formerly React Router v6)",
    supportedFrameworks: [
      "react"
    ],
    icon: "https://user-images.githubusercontent.com/94478/167677696-c05c668e-6290-4ced-8b6b-c2a40211f8e7.jpg"
  },
  bugs: {
    url: "https://github.com/JesusTheHun/storybook-addon-remix-react-router/issues"
  },
  homepage: "https://github.com/JesusTheHun/storybook-addon-remix-react-router#readme"
};

// node_modules/storybook-addon-remix-react-router/dist/index.js
var p = "storybook/react-router-v6";
var z = "reactRouter";
var l = { CLEAR: `${p}/clear`, NAVIGATION: `${p}/navigation`, STORY_LOADED: `${p}/story-loaded`, ROUTE_MATCHES: `${p}/route-matches`, ACTION_INVOKED: `${p}/action_invoked`, ACTION_SETTLED: `${p}/action_settled`, LOADER_INVOKED: `${p}/loader_invoked`, LOADER_SETTLED: `${p}/loader_settled` };
package_default.version;
var D = import_react.default.createContext([]);
var b = import_react.default.createContext(void 0);
function k() {
  let [e, t] = (0, import_react.useState)([]), r = RouteContext;
  return r.Provider._context = new Proxy(r.Provider._context ?? {}, { set(n, o, i) {
    return o === "_currentValue" && i !== void 0 && t((a) => i.matches.length > a.length ? i.matches : a), Reflect.set(n, o, i);
  } }), e;
}
function V(e) {
  let t = {};
  return e.forEach((r, n) => {
    if (r instanceof File) {
      t[n] = { filename: r.name, filesize: r.size, filetype: r.type };
      return;
    }
    t[n] = r;
  }), t;
}
async function T(e) {
  let t = e.clone(), r = t.headers.get("content-type") || "", n;
  switch (true) {
    case r.startsWith("text"):
      n = await t.text();
      break;
    case r.startsWith("application/json"):
      n = await t.json();
      break;
    case r.startsWith("multipart/form-data"):
    case r.startsWith("application/x-www-form-urlencoded"): {
      n = V(await t.formData());
      break;
    }
  }
  return n;
}
var w = () => {
  let e = (0, import_react.useRef)(0);
  return (0, import_react.useCallback)(async (t, r) => {
    e.current++;
    let n = `${t}_${e.current}`;
    switch (t) {
      case l.ACTION_INVOKED: {
        let { request: o, params: i, context: a } = r, c = { url: o.url, method: o.method, body: await T(o) };
        return { key: n, type: t, data: { params: i, request: c, context: a } };
      }
      case l.ACTION_SETTLED:
        return { key: n, type: t, data: r };
      case l.LOADER_INVOKED: {
        let { request: o, params: i, context: a } = r, c = { url: o.url, method: o.method, body: await T(o) };
        return { key: n, type: t, data: { params: i, request: c, context: a } };
      }
      case l.LOADER_SETTLED:
        return { key: n, type: t, data: r };
    }
  }, []);
};
function B() {
  let e = import_preview_api.addons.getChannel(), t = w();
  return (0, import_react.useCallback)((r) => async function(n) {
    if (r === void 0)
      return;
    e.emit(l.ACTION_INVOKED, await t(l.ACTION_INVOKED, n));
    let o = await r(n);
    return e.emit(l.ACTION_SETTLED, await t(l.ACTION_SETTLED, o)), o;
  }, [e, t]);
}
function K() {
  let e = import_preview_api.addons.getChannel(), t = w();
  return (0, import_react.useCallback)((r) => async function(n) {
    if (r === void 0)
      return;
    e.emit(l.LOADER_INVOKED, await t(l.LOADER_INVOKED, n));
    let o = await r(n);
    return e.emit(l.LOADER_SETTLED, await t(l.LOADER_SETTLED, o)), o;
  }, [e, t]);
}
function $() {
  let e = B(), t = K(), r = (0, import_react.useCallback)((n) => n.map((o) => {
    let { action: i, loader: a, children: c, lazy: d } = o, h = { ...o };
    return d && (h.lazy = async function() {
      let s = await d(), f = { ...s };
      return s.action && (f.action = e(s.action)), s.loader && (f.loader = t(s.loader)), f;
    }), i && (h.action = e(i)), a && (h.loader = t(a)), c && (h.children = r(c)), h;
  }), [e, t]);
  return r;
}
var x = () => {
  let e = import_react.default.useContext(b);
  if (e === void 0)
    throw new Error("useStory should be used inside <StoryContext>");
  return e;
};
function L(e, t, r = 0) {
  return e.length === 1 && (e[0].children === void 0 || e[0].children.length === 0) ? [{ ...e[0], element: t }] : e.findIndex((o) => o.useStoryElement) !== -1 ? e.map((o) => o.useStoryElement ? { ...o, element: t } : o) : e.map((o) => o.children ? { ...o, children: L(o.children, t) } : o);
}
var W;
(function(e) {
  e.Pop = "POP", e.Push = "PUSH", e.Replace = "REPLACE";
})(W || (W = {}));
function Se(e, t) {
  if (e === false || e === null || typeof e > "u")
    throw new Error(t);
}
function Ee(e, t) {
  if (!e) {
    typeof console < "u" && console.warn(t);
    try {
      throw new Error(t);
    } catch {
    }
  }
}
var Y;
(function(e) {
  e.data = "data", e.deferred = "deferred", e.redirect = "redirect", e.error = "error";
})(Y || (Y = {}));
function N(e, t) {
  t === void 0 && (t = {});
  let r = e;
  r.endsWith("*") && r !== "*" && !r.endsWith("/*") && (Ee(false, 'Route path "' + r + '" will be treated as if it were ' + ('"' + r.replace(/\*$/, "/*") + '" because the `*` character must ') + "always follow a `/` in the pattern. To get rid of this warning, " + ('please change the route path to "' + r.replace(/\*$/, "/*") + '".')), r = r.replace(/\*$/, "/*"));
  let n = r.startsWith("/") ? "/" : "", o = (a) => a == null ? "" : typeof a == "string" ? a : String(a), i = r.split(/\/+/).map((a, c, d) => {
    if (c === d.length - 1 && a === "*")
      return o(t["*"]);
    let s = a.match(/^:([\w-]+)(\??)$/);
    if (s) {
      let [, f, _] = s, R = t[f];
      return Se(_ === "?" || R != null, 'Missing ":' + f + '" param'), o(R);
    }
    return a.replace(/\?$/g, "");
  }).filter((a) => !!a);
  return n + i.join("/");
}
var J = ["post", "put", "patch", "delete"];
new Set(J);
var Pe = ["get", ...J];
new Set(Pe);
function G({ navigationHistory: e, location: t, routes: r }) {
  if (e !== void 0) {
    let R = [], A, F = Object.values(e);
    for (let v = 0; v < F.length; v++) {
      let { path: O, pathParams: U, searchParams: ie, hash: le, state: se, isInitialLocation: ue } = F[v];
      ue && (A = v);
      let H = M(r), ce = (typeof O == "function" ? O(H, U ?? {}) : O) ?? H;
      R.push({ pathname: N(ce ?? "/", U), search: new URLSearchParams(ie).toString(), hash: le, state: se });
    }
    return A ?? (A = R.length - 1), { initialEntries: R, initialIndex: A };
  }
  let { path: n, pathParams: o, searchParams: i, hash: a, state: c } = t ?? {}, d = M(r), s = (typeof n == "function" ? n(d, o ?? {}) : n) ?? d;
  return { initialEntries: [{ pathname: N(s, o), search: new URLSearchParams(i).toString(), hash: a, state: c }], initialIndex: 0 };
}
function M(e = [], t = "/") {
  if (e.length !== 1)
    return t;
  let r = e[0], n = Ae(t, r.path);
  return r.children === void 0 || r.children.length === 0 ? n : M(r.children, n);
}
function Ae(e, t = "") {
  let r = ["", "/"], n = e.split("/").filter((a) => !r.includes(a)), o = t.split("/").filter((a) => !r.includes(a));
  return "/" + [...n, ...o].join("/");
}
function u(e, t) {
  return Object.prototype.hasOwnProperty.call(e, t);
}
function y(e, t) {
  if (e === false || e === null || typeof e > "u")
    throw console.warn("Test invariant failed:", t), new Error(t);
}
function S(e) {
  return arguments.length === 0 ? [] : Array.isArray(e) ? e : [e];
}
function q(e) {
  var _a;
  return e === void 0 ? [{ path: "/" }] : typeof e == "string" ? [{ path: e }] : (e = S(e), e.length === 1 && ((_a = e[0]).path ?? (_a.path = "/")), e);
}
var E = () => import_react.default.useContext(D);
function X(e) {
  let t = {};
  return e.forEach((r, n) => {
    let o = t[n];
    if (typeof o == "string") {
      t[n] = [o, r];
      return;
    }
    if (Array.isArray(o)) {
      t[n] = [...o, r];
      return;
    }
    t[n] = r;
  }), t;
}
var Q = () => {
  let e = useLocation(), t = e.pathname;
  return e.search.length > 0 && (t += `?${e.search}`), e.hash.length > 0 && (t += `#${e.hash}`), t;
};
var Z = () => {
  let e = (0, import_react.useRef)(0), t = useLocation(), r = useParams(), [n] = useSearchParams(), o = useNavigationType(), i = E(), a = X(n), c = Q(), d = i.map((s) => {
    let f = { path: s.route.path };
    return Object.keys(s.params).length > 0 && (f.params = s.params), f;
  }), h = { url: c, path: t.pathname, routeParams: r, searchParams: a, hash: t.hash, routeState: t.state, routeMatches: d };
  return (s) => {
    e.current++;
    let f = `${s}_${e.current}`;
    switch (s) {
      case l.STORY_LOADED:
        return { key: f, type: s, data: h };
      case l.NAVIGATION:
        return { key: f, type: s, data: { ...h, navigationType: o } };
      case l.ROUTE_MATCHES:
        return { key: f, type: s, data: { matches: d } };
    }
  };
};
function C() {
  let { renderStory: e, storyContext: t } = x(), r = import_preview_api.addons.getChannel(), n = useLocation(), o = E(), i = Z(), a = (0, import_react.useRef)(), c = (0, import_react.useRef)(), d = (0, import_react.useRef)(), h = a.current !== void 0, s = h && n.key !== a.current;
  return s && c.current !== n.key && (r.emit(l.NAVIGATION, i(l.NAVIGATION)), c.current = n.key), s && o.length > 0 && o !== d.current && r.emit(l.ROUTE_MATCHES, i(l.ROUTE_MATCHES)), !h && o.length > 0 && (r.emit(l.STORY_LOADED, i(l.STORY_LOADED)), a.current = n.key, d.current = o), d.current = o, import_react.default.createElement(import_react.default.Fragment, null, e(t));
}
C.displayName = "RouterLogger";
function te() {
  let { addonParameters: e = {} } = x(), { hydrationData: t, routing: r, navigationHistory: n, location: o } = e, i = $(), a = (0, import_react.useMemo)(() => {
    let c = q(r), d = i(c), h = L(d, import_react.default.createElement(C, null)), { initialEntries: s, initialIndex: f } = G({ navigationHistory: n, location: o, routes: h });
    return createMemoryRouter(h, { initialEntries: s, initialIndex: f, hydrationData: t });
  }, [i, t, o, n, r]);
  return import_react.default.createElement(RouterProvider, { router: a, fallbackElement: import_react.default.createElement(ze, null) });
}
function ze() {
  return import_react.default.createElement("p", null, "Performing initial data load");
}
var re = ({ renderStory: e, storyContext: t, addonParameters: r }) => {
  let n = k();
  return import_react.default.createElement(b.Provider, { value: { renderStory: e, storyContext: t, addonParameters: r } }, import_react.default.createElement(D.Provider, { value: n }, import_react.default.createElement(te, null)));
};
function oe(e) {
  if (import_react.default.isValidElement(e))
    return true;
  switch (true) {
    case import_react.default.isValidElement(e):
    case typeof e == "string":
    case typeof e == "number":
    case typeof e == "boolean":
    case e === null:
    case e === void 0:
    case (e instanceof Object && u(e, Symbol.iterator)):
      return true;
  }
  return false;
}
function m(e) {
  return oe(e) ? { element: e } : e;
}
function ae(e = {}) {
  let t = ["location", "navigationHistory", "routing"];
  if (Object.keys(e ?? {}).some((o) => t.includes(o)))
    return e;
  let n = { routing: {}, location: {}, hydrationData: void 0 };
  if (u(e, "routePath") && (n.location.path = e.routePath, n.routing.path = e.routePath), u(e, "routeParams") && (n.location.pathParams = e.routeParams), u(e, "routeState") && (n.location.state = e.routeState), u(e, "routeHandle") && (n.routing.handle = e.routeHandle), u(e, "searchParams") && (n.location.searchParams = e.searchParams), u(e, "browserPath") && (n.location.path = e.browserPath), u(e, "loader") && (n.routing.loader = e.loader), u(e, "action") && (n.routing.action = e.action), u(e, "errorElement") && (n.routing.errorElement = e.errorElement), u(e, "hydrationData") && (n.hydrationData = e.hydrationData), u(e, "shouldRevalidate") && (n.routing.shouldRevalidate = e.shouldRevalidate), u(e, "routeId") && (n.routing.id = e.routeId), u(e, "outlet")) {
    let o = m(e.outlet);
    o.path ?? (o.path = ""), n.routing.children = [o];
  }
  return n.routing.useStoryElement = true, n;
}
var Be = (0, import_preview_api.makeDecorator)({ name: "withRouter", parameterName: z, wrapper: (e, t, { parameters: r }) => {
  let n = ae(r);
  return import_react.default.createElement(re, { renderStory: e, storyContext: t, addonParameters: n });
} });
function Ke(e) {
  return e;
}
function g(e) {
  let t = {}, r = [];
  return e.length === 1 && (t = {}, r = e[0]), e.length === 2 && (t = typeof e[0] == "string" ? { path: e[0] } : m(e[0]), r = e[1]), [t, r];
}
function $e(...e) {
  let [t, r] = g(e);
  y(!u(t, "element"), "The story definition cannot contain the `element` property because the story element will be used");
  let n = m(r);
  return n.index = true, [{ ...t, useStoryElement: true, children: [n] }];
}
function We(...e) {
  let [t, r] = g(e);
  return y(!u(t, "element"), "The story definition cannot contain the `element` property because the story element will be used"), [{ ...t, useStoryElement: true, children: r }];
}
function Ye(...e) {
  let [t, r] = g(e);
  y(!u(t, "element"), "The story definition cannot contain the `element` property because the story element will be used");
  let n = {}, o = n;
  return r.forEach((i) => {
    let a = m(i);
    a.path ?? (a.path = ""), o.children = [a], o = a;
  }, n), [{ ...t, useStoryElement: true, children: [n] }];
}
function Je(...e) {
  let t = e.length === 1 ? {} : e[0], r = S(e.length === 1 ? e[0] : e[1]);
  y(!u(t, "element"), "The story definition cannot contain the `element` property because the story element will be used");
  let n = { path: "/" }, o = n;
  for (let i = 0; i < r.length; i++) {
    let a = r[i], c = m(a);
    c.path ?? (c.path = ""), o.children = [c], o = c;
  }
  return o.children = [{ ...t, index: true, useStoryElement: true }], [n];
}
export {
  m as castRouterRoute,
  Je as reactRouterNestedAncestors,
  Ye as reactRouterNestedOutlets,
  $e as reactRouterOutlet,
  We as reactRouterOutlets,
  Ke as reactRouterParameters,
  Be as withRouter
};
/*! Bundled license information:

storybook-addon-remix-react-router/dist/index.js:
  (*! Bundled license information:
  
  @remix-run/router/dist/router.js:
    (**
     * @remix-run/router v1.15.2
     *
     * Copyright (c) Remix Software Inc.
     *
     * This source code is licensed under the MIT license found in the
     * LICENSE.md file in the root directory of this source tree.
     *
     * @license MIT
     *)
  *)
*/
//# sourceMappingURL=storybook-addon-remix-react-router.js.map
